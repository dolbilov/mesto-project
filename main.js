(()=>{"use strict";var e={174:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},953:(e,t,r)=>{e.exports=r.p+"37d8aaa587b660f11253.svg"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="",r.b=document.baseURI||self.location.href,(()=>{var e=r(174),t=r.n(e),n=new URL(r(953),r.b);t()(n);var o={baseUrl:"https://nomoreparties.co/v1/".concat("plus-cohort-16"),headers:{authorization:"604a1865-9670-49d6-afd1-eae792e4450f","Content-Type":"application/json"}},a=".form",i=".form__button",l=document.querySelector(".popup_type_profile"),c=document.querySelector(".popup_type_card"),u=(document.querySelector(".popup_type_image"),document.querySelector(".popup_type_avatar")),s=l.querySelector(a),f=c.querySelector(a),d=u.querySelector(a);function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s.querySelector("#name"),s.querySelector("#about"),document.querySelector(".profile__image-container"),document.querySelector(".profile__edit-button"),s.querySelector(i),document.querySelector(".profile__add-button"),f.querySelector("#place-heading"),f.querySelector("#link"),f.querySelector(i),d.querySelector("#avatar-link"),d.querySelector(i),document.querySelector(".popup_type_delete-card");var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t}var t,r;return t=e,r=[{key:"handleError",value:function(e){void 0===e.status?console.warn("Неизвестная ошибка"):console.warn("Ошибка ".concat(e.status))}},{key:"_getData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log(e),console.log(t),console.log(r),console.log("-------");var n={method:t,headers:this._config.headers};return r&&(n.body=JSON.stringify(r)),fetch("".concat(this._config.baseUrl,"/").concat(e),n).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"getUserInfo",value:function(){return this._getData("users/me")}},{key:"getInitialCards",value:function(){return this._getData("cards")}},{key:"setProfileData",value:function(e,t){return this._getData("users/me","PATCH",{name:e,about:t})}},{key:"createCard",value:function(e,t){return this._getData("cards","POST",{name:e,link:t})}},{key:"deleteCard",value:function(e){return this._getData("cards/".concat(e),"DELETE")}},{key:"setLike",value:function(e){return this._getData("cards/likes/".concat(e),"PUT")}},{key:"unsetLike",value:function(e){return this._getData("cards/likes/".concat(e),"DELETE")}},{key:"setAvatar",value:function(e){return this._getData("users/me/avatar","PATCH",{avatar:e})}}],r&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){var r=t.profileNameSelector,n=t.profileAboutSelector,o=t.profileAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(r),this._profileAbout=document.querySelector(n),this._profileAvatar=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(e){return e()}},{key:"setUserInfo",value:function(e,t,r){var n=this,o=e.name,a=e.about,i=e.avatar;console.log("start"),t(o,a).then((function(e){n._profileName.textContent=e.name,n._profileAbout.textContent=e.about})),console.log("middle"),r(i).then((function(e){n._profileAvatar.src=e.avatar})),console.log("end")}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._selector=r,this._handleCardClick=n}var t,r;return t=e,(r=[{key:"_getElement",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){}},{key:"generate",value:function(){var e=this._getElement(),t=e.querySelector(".card__heading"),r=e.querySelector(".card__image"),n=e.querySelector(".card__likes-count-text");return e.querySelector(".card__like-button"),e.querySelector(".card__delete-button"),t.textContent=this._name,r.src=this._link,r.alt=this._name,r.addEventListener("click",this._handleCardClick),n.textContent=this._likes.length,e}}])&&_(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g,S=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._clear(),this._renderedItems.forEach((function(t){return e._renderer(t)}))}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=new p(o);Promise.all([q.getUserInfo(),q.getInitialCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];g=new v({profileNameSelector:".profile__name-text",profileAboutSelector:".profile__description",profileAvatarSelector:".profile__image"}),console.log("start of set user method"),g.setUserInfo(o,q.setProfileData,q.setAvatar),console.log("end of set user method");var i=new S({items:a,renderer:function(e){var t=new m(e,"#card",(function(){})).generate();i.addItem(t)}},".cards__list");i.renderItems()})).catch(q.handleError)})()})();